a <- 1
b <- 2
a > b
v <- c(1,2,3)
5 %in% v
combatsc <- readRDS("~/Downloads/combat.rds")
View(combatsc)
names(assays(combatsc))=c("logcounts","counts")
sc_combat <- as.Seurat(combatsc)
library(Seurat)
sc_combat <- as.Seurat(combatsc)
# 1) CRAN
options(repos = c(CRAN = "https://cloud.r-project.org"))
# 2) Ù†ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ BiocManager Ù„ØªØ«Ø¨ÙŠØª Ø­Ø²ÙŽÙ… Bioconductor Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©
if (!requireNamespace("BiocManager", quietly = TRUE)) {
install.packages("BiocManager")
}
# 3) ØªØ¹Ø±ÙŠÙ Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø­Ø²Ù…
#    - CRAN: tidyverse Ù„Ù„ØªØ­Ø¶ÙŠØ±ØŒ ggplot2 Ù„Ù„Ø±Ø³ÙˆÙ…ØŒ Ø¥Ø¶Ø§ÙØ§Øª Ù…ÙÙŠØ¯Ø©
cran_pkgs <- c(
"tidyverse",
"ggplot2",
"ggrepel",
"pheatmap",
"RColorBrewer"
)
#    - Bioconductor
bioc_pkgs <- c(
"DESeq2",
"apeglm",
"AnnotationDbi",
"org.Hs.eg.db",
"clusterProfiler"
)
# 4) Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø©: ØªØ«Ø¨ÙŠØª Ø­Ø²Ù…Ø© Ù…Ù† CRAN Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©
install_if_missing_cran <- function(pkg) {
if (!requireNamespace(pkg, quietly = TRUE)) {
message(sprintf("ðŸ”§ ØªØ«Ø¨ÙŠØª Ø­Ø²Ù…Ø© CRAN: %s ...", pkg))
install.packages(pkg)
} else {
message(sprintf("âœ… Ù…ÙˆØ¬ÙˆØ¯Ø© Ù…Ø³Ø¨Ù‚Ù‹Ø§: %s", pkg))
}
}
# 5) Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø©: ØªØ«Ø¨ÙŠØª Ø­Ø²Ù…Ø© Bioconductor Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©
install_if_missing_bioc <- function(pkg) {
if (!requireNamespace(pkg, quietly = TRUE)) {
message(sprintf("ðŸ”¬ ØªØ«Ø¨ÙŠØª Ø­Ø²Ù…Ø© Bioconductor: %s ...", pkg))
BiocManager::install(pkg, ask = FALSE, update = FALSE)
} else {
message(sprintf("âœ… Ù…ÙˆØ¬ÙˆØ¯Ø© Ù…Ø³Ø¨Ù‚Ù‹Ø§: %s", pkg))
}
}
# 6) ØªØ«Ø¨ÙŠØª Ø­Ø²Ù… CRAN Ø§Ù„Ù†Ø§Ù‚ØµØ©
invisible(lapply(cran_pkgs, install_if_missing_cran))
# 7) ØªØ«Ø¨ÙŠØª Ø­Ø²Ù… Bioconductor Ø§Ù„Ù†Ø§Ù‚ØµØ©
invisible(lapply(bioc_pkgs, install_if_missing_bioc))
# 8) Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ø²Ù… (Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹)
all_pkgs <- c(cran_pkgs, bioc_pkgs)
load_results <- sapply(all_pkgs, require, character.only = TRUE, quietly = TRUE)
message("------------------------------------------------------------")
message("Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ­Ù…ÙŠÙ„:")
for (i in seq_along(all_pkgs)) {
msg <- if (load_results[i]) "âœ… ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­" else "âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„"
message(sprintf(" - %s: %s", all_pkgs[i], msg))
}
message("------------------------------------------------------------")
# 9)  (Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·)
if (Sys.info()[['sysname']] == "Windows") {
message("ðŸ’¡ Ù…Ù„Ø§Ø­Ø¸Ø© Windows: Ø¥Ø°Ø§ ÙˆØ§Ø¬Ù‡Øª Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Ø§Ù„ØªØ«Ø¨ÙŠØª Ù…Ù† Ø§Ù„Ù…ØµØ¯Ø±ØŒ Ø«Ø¨Ù‘Øª Rtools Ù…Ù†:")
message("   https://cran.r-project.org/bin/windows/Rtools/")
}
if (Sys.info()[['sysname']] == "Darwin") {
message("ðŸ’¡ Ù…Ù„Ø§Ø­Ø¸Ø© macOS: ØªØ£ÙƒØ¯ Ù…Ù† ØªØ«Ø¨ÙŠØª Ø£Ø¯ÙˆØ§Øª Xcode Command Line:")
message("   xcode-select --install")
}
message("ðŸŽ‰ ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡. ÙŠÙÙØ¶Ù‘Ù„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ R/RStudio Ù‚Ø¨Ù„ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ÙˆØ±Ø´Ø©.")
for (i in seq_along(all_pkgs)) {
msg <- if (load_results[i]) "âœ… ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­" else "âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„"
message(sprintf(" - %s: %s", all_pkgs[i], msg))
}
setwd("~/Documents/Oxford-Workshop-bulk-RNA-seq-analysis-using-R")
